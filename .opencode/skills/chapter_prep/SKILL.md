---
name: chapter_prep
description: 一次性完成章节创作的所有预分析工作，整合上下文分析、伏笔安排和角色语音指导
---

# 章节准备Skill

## 功能

一次性完成章节创作的所有预分析工作，整合上下文分析、伏笔安排和角色语音指导，为章节创作提供完整的上下文信息。

---

## 使用场景

- 创作新章节前（从第3章开始）
- 为章节创作提供全面的上下文信息
- 确保剧情连贯性和伏笔的合理安排
- 确保角色语音和行为的一致性

---

## 工作流程

### 步骤1：读取输入信息
- 读取章节信息、本卷大纲、前后章节大纲
- 读取已写章节内容
- 读取角色卡、角色关系、世界观

### 步骤2：上下文分析
- 分析本卷大纲
- 提炼前两章关键信息
- 分析后两章衔接需求

### 步骤3：伏笔安排
- 分析前文伏笔
- 设计本章伏笔
- 确定伏笔回收方式

### 步骤4：角色语音指导
- 分析角色语音特点
- 指导角色行为
- 指导角色称谓使用

### 步骤5：生成创作指导
- 生成开头建议
- 生成结尾建议
- 列出需要避免的内容
- 列出保持一致的关键点

---

## 输入格式

```json
{
  "章节信息": {
    "序号": "1-4",
    "章节号": 4,
    "章节大纲": "第4章的大纲内容",
    "章节目标": "本章要达成的目标",
    "主要事件": "本章发生的核心事件",
    "环境": "村长家中",
    "时间": "第2天下午"
  },
  "本卷大纲": "第1卷的完整大纲内容",
  "前后章节大纲": {
    "前两章大纲": [
      {
        "章节号": 2,
        "大纲": "第2章大纲内容"
      },
      {
        "章节号": 3,
        "大纲": "第3章大纲内容"
      }
    ],
    "后两章大纲": [
      {
        "章节号": 5,
        "大纲": "第5章大纲内容"
      },
      {
        "章节号": 6,
        "大纲": "第6章大纲内容（如果不存在则为null）"
      }
    ]
  },
  "已写章节": [
    {
      "章节号": 1,
      "文件路径": "output/chapters/第1卷_第1章_六人奇遇.md"
    },
    {
      "章节号": 2,
      "文件路径": "output/chapters/第1卷_第2章_初见炊烟.md"
    },
    {
      "章节号": 3,
      "文件路径": "output/chapters/第1卷_第3章_初入村寨.md"
    }
  ],
  "角色卡": {
    "荆杨": "完整信息",
    "赵奇": "完整信息",
    "村长": "完整信息"
  },
  "角色关系": {
    "荆杨-赵奇": "互相尊重，荆杨逐渐展现领导力",
    "荆杨-村长": "初步建立信任，村长在试探",
    "赵奇-村长": "礼貌交流，建立初步印象"
  },
  "世界观": "相关世界观设定（如有）"
}
```

---

## 输出格式

```json
{
  "状态": "成功",
  "上下文分析": {
    "本卷大纲分析": {
      "本卷主题": "第1卷的主题",
      "本卷目标": "第1卷的目标",
      "本章在本卷中的作用": "本章在本卷中的定位和作用",
      "本章需要达成的小目标": ["小目标1", "小目标2"],
      "本章需要推进的情节线": ["情节线1", "情节线2"]
    },
    "前两章剧情提炼": {
      "第N-2章关键点": ["点1", "点2"],
      "第N-1章关键点": ["点1", "点2"],
      "当前时间线": "第2天下午",
      "当前地点": "村长家中",
      "角色状态": {
        "荆杨": "状态描述",
        "赵奇": "状态描述"
      },
      "已埋伏笔": ["伏笔1", "伏笔2"],
      "已解决情节": ["情节1"],
      "待解决情节": ["情节2"]
    },
    "后两章衔接分析": {
      "后两章时间线": ["第2天晚上", "第3天上午"],
      "后两章地点": ["村中客栈", "村口"],
      "后两章主要事件": ["事件1", "事件2"],
      "后两章关键角色": ["角色1", "角色2"],
      "需要为本章结尾铺垫的内容": ["铺垫1", "铺垫2"],
      "避免在本章结尾解决的问题": ["问题1", "问题2"],
      "本章结尾应如何衔接后两章": "具体衔接方式"
    }
  },
  "伏笔安排": {
    "前文伏笔分析": {
      "已埋伏笔": [
        {
          "伏笔内容": "荆杨的观察力和逻辑能力",
          "所在章节": 1,
          "回收状态": "未回收",
          "建议回收时机": "后续危机中展现"
        },
        {
          "伏笔内容": "赵奇的医术和知识储备",
          "所在章节": 1,
          "回收状态": "未回收",
          "建议回收时机": "遇到伤病时展现"
        }
      ],
      "待回收伏笔": ["伏笔1", "伏笔2"],
      "建议在本章回收的伏笔": [
        {
          "伏笔内容": "某个伏笔",
          "回收方式": "如何在本章中回收",
          "回收场景": "具体场景"
        }
      ]
    },
    "本章伏笔设计": {
      "需要埋入的伏笔": [
        {
          "伏笔内容": "为后续章节做铺垫",
          "埋入方式": "如何在本章中埋入",
          "埋入场景": "具体场景",
          "预期回收章节": 7
        }
      ],
      "伏笔类型": [
        {
          "类型": "细节伏笔",
          "示例": "某个物品或细节",
          "作用": "后续关键作用"
        },
        {
          "类型": "对话伏笔",
          "示例": "某句看似无意的对话",
          "作用": "暗示后续发展"
        }
      ]
    }
  },
  "角色语音指导": {
    "角色语音分析": {
      "荆杨": {
        "说话语气": "简洁有力，逻辑清晰，不轻易表态",
        "常用语汇": ["让我想想", "从目前的情况看", "我觉得"],
        "句式特点": "多为陈述句，少用感叹句",
        "本章环境下的语气": "保持礼貌但警惕，不透露过多信息"
      },
      "赵奇": {
        "说话语气": "温和有礼，知识渊博",
        "常用语汇": ["根据我的观察", "从医学角度看", "我认为"],
        "句式特点": "多用委婉句，语气缓和",
        "本章环境下的语气": "尊重长辈，展现专业知识"
      },
      "村长": {
        "说话语气": "稳重，有威严，不轻易信任",
        "常用语汇": ["嗯", "你们", "外人"],
        "句式特点": "多用问句试探，少直接表态",
        "本章环境下的语气": "试探性强，观察六人反应"
      }
    },
    "角色行为指导": {
      "荆杨": {
        "行为特点": "观察周围，保持警惕",
        "本章环境下的行为": "观察村长的表情和动作，注意村民的反应",
        "避免的行为": "不要过多提问，不要暴露现代知识"
      },
      "赵奇": {
        "行为特点": "分析问题，提供解决方案",
        "本章环境下的行为": "礼貌回应，展现医术和知识",
        "避免的行为": "不要卖弄知识，不要过于主动"
      }
    },
    "角色称谓指导": {
      "荆杨对赵奇": {
        "称谓": "赵兄",
        "本章环境下的使用": "保持尊重，但不过分客气"
      },
      "荆杨对村长": {
        "称谓": "村长",
        "本章环境下的使用": "保持礼貌，但保持距离"
      },
      "赵奇对荆杨": {
        "称谓": "荆兄",
        "本章环境下的使用": "尊重，但不过分"
      },
      "赵奇对村长": {
        "称谓": "村长",
        "本章环境下的使用": "保持恭敬，展现晚辈礼节"
      },
      "村长对荆杨": {
        "称谓": "这位年轻人",
        "本章环境下的使用": "保持距离，观察反应"
      },
      "村长对赵奇": {
        "称谓": "这位大夫",
        "本章环境下的使用": "试探医术，观察能力"
      }
    }
  },
  "创作指导": {
    "开头应承接": "如何承接上一章结尾",
    "核心冲突设计": "设计核心冲突细节",
    "结尾应铺垫": "如何为后两章做铺垫",
    "需要避免的内容": [
      "重复分析时代",
      "重复介绍角色",
      "前后矛盾"
    ],
    "保持一致的关键点": ["点1", "点2"],
    "需要推进的情节": ["情节1", "情节2"],
    "需要埋下的伏笔": ["伏笔1", "伏笔2"]
  },
  "潜在风险": [
    "风险1：伏笔埋设过于明显",
    "风险2：角色对话语气不符合设定",
    "风险3：章节衔接不当"
  ]
}
```

---

## 分析维度

### 1. 上下文分析

#### 本卷大纲分析
- 本卷主题和目标
- 本章在本卷中的作用
- 本章需要达成的小目标
- 本章需要推进的情节线

#### 前两章剧情提炼
- 前两章的关键点
- 当前时间线
- 当前地点
- 角色状态
- 已埋伏笔
- 已解决情节
- 待解决情节

#### 后两章衔接分析
- 后两章时间线和地点
- 后两章主要事件和关键角色
- 需要在本章结尾铺垫的内容
- 避免在本章结尾解决的问题
- 需要为后两章预留的信息
- 本章结尾应如何衔接后两章

### 2. 伏笔安排

#### 前文伏笔分析
- 已埋伏笔列表
- 待回收伏笔列表
- 建议在本章回收的伏笔

#### 本章伏笔设计
- 需要埋入的伏笔
- 伏笔类型（细节/对话/情节/象征）
- 伏笔埋入方式和场景
- 预期回收时机

### 3. 角色语音指导

#### 角色语音分析
- 说话语气
- 常用语汇
- 句式特点
- 停顿习惯
- 本章环境下的语气

#### 角色行为指导
- 行为特点
- 肢体语言
- 本章环境下的行为
- 需要注意的事项
- 避免的行为

#### 角色称谓指导
- 称谓类型
- 语境使用
- 本章环境下的使用

## 使用流程

### 第一步：读取输入信息
- 读取章节信息
- 读取本卷大纲
- 读取前后章节大纲
- 读取已写章节内容
- 读取角色卡
- 读取角色关系
- 读取世界观

### 第二步：上下文分析
- 分析本卷大纲
- 提炼前两章关键信息
- 分析后两章衔接需求

### 第三步：伏笔安排
- 分析前文伏笔
- 设计本章伏笔
- 确定伏笔回收方式

### 第四步：角色语音指导
- 分析角色语音特点
- 指导角色行为
- 指导角色称谓使用

### 第五步：生成创作指导
- 生成开头建议
- 生成结尾建议
- 列出需要避免的内容
- 列出保持一致的关键点
- 列出需要推进的情节
- 列出需要埋下的伏笔

### 第六步：识别潜在风险
- 识别伏笔埋设风险
- 识别角色行为风险
- 识别章节衔接风险

## 检查清单

### 上下文完整性
- [ ] 时间线连贯
- [ ] 地点准确
- [ ] 角色状态一致
- [ ] 情节连贯

### 伏笔合理性
- [ ] 伏笔埋设自然
- [ ] 伏笔回收合理
- [ ] 伏笔与主线相关

### 角色一致性
- [ ] 角色语音符合设定
- [ ] 角色行为符合设定
- [ ] 角色称谓符合关系

### 创作指导完整性
- [ ] 开头承接建议清晰
- [ ] 结尾铺垫建议明确
- [ ] 避免事项具体
- [ ] 潜在风险识别准确

## 注意事项
1. 一次性生成所有上下文信息，避免多次调用
2. 上下文分析、伏笔安排、角色语音指导要相互协调
3. 创作指导要具体、可操作
4. 识别潜在风险要全面

---

## 相关Skill

- **chapter_outline**：使用chapter_prep输出生成骨架文
- **chapter_write**：使用chapter_prep输出进行创作
- **auto_check**：使用chapter_prep输出进行检查
- **quality_agent**：使用chapter_prep输出进行质量评估


