---
name: chapter_outline
description: 设计本章具体情节的展开，写出骨架文，并生成强制约束清单，防止章节跑题
---

# 章节骨架Skill

## 功能

结合世界观、本章大纲、涉及角色角色卡、本章内角色关系，设计本章具体情节的展开，写出一份骨架文，并生成强制约束清单，为后续的章节写作提供详细的情节框架和约束条件。

---

## 使用场景

- 创作新章节前
- 设计详细的情节框架
- 确保章节内容符合大纲要求
- 为章节写作提供清晰的结构
- **防止章节跑题的关键工具**

---

## 工作流程

### 步骤1：读取输入信息
- 读取当前章节信息、涉及角色列表、角色卡
- 读取角色关系、世界观设定
- 读取本卷大纲、前后章节大纲
- 读取chapter_prep输出

### 步骤2：设计情节框架
- 设计开场：如何承接前文
- 设计发展：如何推进情节（可多个段落）
- 设计高潮：本章的高潮是什么
- 设计结尾：如何为下一章铺垫

### 步骤3：规划角色发展
- 规划每个角色在本章的表现
- 规划每个角色的能力展现
- 规划每个角色的关系进展

### 步骤4：安排伏笔
- 安排本回收的伏笔
- 安排本埋入的伏笔

### 步骤5：检查情节连贯性
- 检查与前文的衔接
- 检查与后文的铺垫
- 检查时间线、地点、角色状态连贯性

### 步骤6：生成创作提示
- 生成开头建议
- 生成发展建议
- 生成高潮建议
- 生成结尾建议

### 步骤7：预估字数
- 预估各部分字数
- 预估总字数

### 步骤8：生成强制约束清单
- 列出禁止写的内容
- 列出必须达成的事件
- 设置限制条件
- 设置字数范围限制
- 设置伏笔要求
- 设置角色行为约束
- 设置情节推进约束

---

## 输入格式

```json
{{
  "当前章节信息": {
    "章节号": 4,
    "章节大纲": "第4章的大纲内容",
    "章节目标": "本章要达成的目标",
    "主要事件": "本章发生的核心事件",
    "环境": "村长家中",
    "时间": "第2天下午"
  },
  "涉及角色": ["荆杨", "赵奇", "村长"],
  "角色卡": {
    "荆杨": "完整信息",
    "赵奇": "完整信息",
    "村长": "完整信息"
  },
  "角色关系": {
    "荆杨-赵奇": "互相尊重，荆杨逐渐展现领导力",
    "荆杨-村长": "初步建立信任，村长在试探",
    "赵奇-村长": "礼貌交流，建立初步印象"
  },
  "世界观": "相关世界观设定",
  "本卷大纲": "第1卷的完整大纲内容",
  "前后章节大纲": {
    "前两章大纲": [
      {
        "章节号": 2,
        "大纲": "第2章大纲内容"
      },
      {
        "章节号": 3,
        "大纲": "第3章大纲内容"
      }
    ],
    "后两章大纲": [
      {
        "章节号": 5,
        "大纲": "第5章大纲内容"
      },
      {
        "章节号": 6,
        "大纲": "第6章大纲内容"
      }
    ]
  },
  "chapter_prep输出": {
    "上下文分析": "chapter_prep的上下文分析输出",
    "伏笔安排": "chapter_prep的伏笔安排输出",
    "角色语音指导": "chapter_prep的角色语音指导输出"
  }
}
```

## 输出格式
```json
{
  "状态": "成功",
  "骨架文": {
    "章节号": 4,
    "章节标题": "章见村长",
    "章节目标": "与村长建立初步信任",
    "时间线": "第2天下午",
    "地点": "村长家中",

    "情节框架": {
      "开场": {
        "内容": "六人来到村长家门前，敲门进入",
        "时间": "下午时分",
        "地点": "村长家门口",
        "角色": ["荆杨", "赵奇", "其他四人", "村长"],
        "关键动作": "敲门、进入、问候",
        "场景描写": "村长家的外观，周围的安静环境",
        "伏笔埋设": ["村长办公桌上的书信（暗示有重要消息）"],
        "字数预估": "200字"
      },

      "发展": [
        {
          "段落": 1,
          "内容": "村长邀请六人入座，开始交谈",
          "时间": "下午时分",
          "地点": "村长家客厅",
          "角色": ["荆杨", "赵奇", "村长"],
          "关键动作": "入座、寒暄",
          "关键对话": [
            {
              "说话人": "村长",
              "内容": "几位请坐，喝口水吧",
              "语气": "试探",
              "目的": "观察六人的反应"
            },
            {
              "说话人": "荆杨",
              "内容": "多谢村长",
              "语气": "礼貌",
              "目的": "保持礼貌，不透露过多"
            }
          ],
          "情节推进": "村长开始试探六人的来历",
          "伏笔埋设": [],
          "字数预估": "300字"
        },
        {
          "段落": 2,
          "内容": "村长询问六人的来历",
          "时间": "下午时分",
          "地点": "村长家客厅",
          "角色": ["荆杨", "村长"],
          "关键动作": "问答",
          "关键对话": [
            {
              "说话人": "村长",
              "内容": "几位是从哪里来的？",
              "语气": "试探",
              "目的": "确认六人的来历"
            },
            {
              "说话人": "荆杨",
              "内容": "我们是从北边逃难过来的",
              "语气": "谨慎",
              "目的": "按照编造的身份回答"
            }
          ],
          "情节推进": "荆杨按照编造的身份回答",
          "伏笔埋设": [],
          "字数预估": "400字"
        },
        {
          "段落": 3,
          "内容": "赵奇主动提出帮忙检查村长夫人的病情",
          "时间": "下午时分",
          "地点": "村长家客厅",
          "角色": ["赵奇", "村长"],
          "关键动作": "赵奇提出帮忙",
          "关键对话": [
            {
              "说话人": "村长",
              "内容": "老夫人的病情一直不见好转",
              "语气": "担忧",
              "目的": "试探六人的能力"
            },
            {
              "说话人": "赵奇",
              "内容": "在下略通医术，能否让在下看看？",
              "语气": "恭敬",
              "目的": "展现能力，建立信任"
            }
          ],
          "情节推进": "赵奇展现医术，建立初步信任",
          "伏笔回收": ["回收第1章的赵奇医术伏笔"],
          "字数预估": "500字"
        }
      ],

      "高潮": {
        "内容": "赵奇为村长夫人诊脉，给出诊断和建议",
        "时间": "下午时分",
        "地点": "村长夫人房间",
        "角色": ["赵奇", "村长", "村长夫人"],
        "关键动作": "诊脉、分析、给出建议",
        "关键对话": [
          {
            "说话人": "赵奇",
            "内容": "老夫人的病情主要是......",
            "语气": "专业",
            "目的": "展现医术，建立信任"
          },
          {
            "说话人": "村长",
            "内容": "多谢这位大夫",
            "语气": "感激",
            "目的": "表达感激，建立信任"
          }
        ],
        "情节推进": "赵奇成功诊断，六人获得初步信任",
        "伏笔回收": ["成功回收第1章的赵奇医术伏笔"],
        "伏笔埋设": ["村长提到最近有些不安（为后续埋伏笔）"],
        "字数预估": "600字"
      },

      "结尾": {
        "内容": "六人告别村长，离开村长家",
        "时间": "傍晚时分",
        "地点": "村长家门口",
        "角色": ["荆杨", "赵奇", "其他四人"],
        "关键动作": "告别、离开",
        "关键对话": [
          {
            "说话人": "村长",
            "内容": "几位可以暂时在村里住下",
            "语气": "客气",
            "目的": "表达善意"
          },
          {
            "说话人": "荆杨",
            "内容": "多谢村长收留",
            "语气": "感谢",
            "目的": "表达感谢"
          }
        ],
        "情节推进": "六人获得在村中暂住的许可",
        "伏笔埋设": ["村长似乎有话要说（为下一章埋伏笔）"],
        "字数预估": "200字"
      }
    },

    "整体结构": {
      "开头": "承接第3章结尾，六人进入村长家",
      "发展": "村长试探六人，赵奇展现医术",
      "高潮": "赵奇为村长夫人诊断，获得初步信任",
      "结尾": "六人获得在村中暂住的许可"
    },

    "角色发展": {
      "荆杨": {
        "本章表现": "保持警惕，主导对话",
        "能力展现": "观察力和逻辑能力",
        "关系进展": "与村长初步建立信任",
        "下一步发展": "继续展现领导力"
      },
      "赵奇": {
        "本章表现": "温和有礼，展现医术",
        "能力展现": "医术和知识储备",
        "关系进展": "与村长建立良好印象",
        "下一步发展": "继续展现能力"
      },
      "村长": {
        "本章表现": "试探六人，观察反应",
        "关系进展": "对六人建立初步信任",
        "下一步发展": "进一步观察六人"
      }
    },

    "伏笔安排": {
      "本回收的伏笔": [
        {
          "伏笔内容": "赵奇的医术和知识储备",
          "回收章节": 4,
          "回收方式": "赵奇为村长夫人诊断",
          "回收效果": "成功回收"
        }
      ],
      "本埋入的伏笔": [
        {
          "伏笔内容": "村长办公桌上的书信",
          "埋入章节": 4,
          "埋入方式": "细节伏笔",
          "预期回收章节": 6,
          "预期回收方式": "村长透露书信内容"
        },
        {
          "伏笔内容": "村寨面临外部威胁",
          "埋入章节": 4,
          "埋入方式": "对话伏笔",
          "预期回收章节": 7,
          "预期回收方式": "外部威胁出现"
        }
      ]
    },

    "情节连贯性": {
      "与前文衔接": "自然承接第3章结尾",
      "与后文铺垫": "为第5章蜀军出现做铺垫",
      "时间线连贯": "第2天下午，合理",
      "地点连贯": "村长家中，合理",
      "角色状态连贯": "符合角色当前状态"
    },

    "创作提示": {
      "开头建议": "承接第3章结尾，自然进入",
      "发展建议": "村长试探要自然，赵奇展现能力要适度",
      "高潮建议": "赵奇诊断要专业，获得信任要合理",
      "结尾建议": "为下一章留悬念，铺垫要自然",
      "需要注意": "保持角色语气和行为一致性"
    },

    "字数预估": {
      "开场": 200,
      "发展": 1200,
      "高潮": 600,
      "结尾": 200,
      "总计": 2200
    }
  },

  "强制约束清单": {
    "禁止写的内容": [
      "不要重复分析时代（第1章已分析）",
      "不要重复介绍角色基本背景（第1章已介绍）",
      "不要重复讨论穿越原因（第1章已讨论）",
      "不要在本章就透露蜀军信息（第5章才有）",
      "不要让村长在本章就完全信任六人"
    ],

    "必须达成的事件": [
      "必须达成事件1：六人见到村长",
      "必须达成事件2：村长试探六人来历",
      "必须达成事件3：赵奇展现医术",
      "必须达成事件4：建立初步信任",
      "必须达成事件5：获得暂住许可"
    ],

    "限制条件": {
      "时间限制": "第2天下午到傍晚",
      "地点限制": "主要在村长家中",
      "角色状态限制": {
        "荆杨": "保持警惕，不完全信任",
        "赵奇": "温和有礼，展现能力",
        "村长": "试探六人，观察反应"
      },
      "知识水平限制": {
        "荆杨": "只知道第1章分析出的时代信息",
        "赵奇": "只知道现代医学知识",
        "村长": "不知道六人的真实来历"
      }
    },

    "字数范围限制": {
      "最小字数": "1800字",
      "最大字数": "2600字",
      "建议字数": "2200字"
    },

    "伏笔要求": {
      "必须回收的伏笔": [
        {
          "伏笔内容": "赵奇的医术和知识储备",
          "回收方式": "赵奇为村长夫人诊断",
          "重要性": "高"
        }
      ],
      "必须埋入的伏笔": [
        {
          "伏笔内容": "村长似乎有话要说",
          "埋入方式": "结尾暗示",
          "重要性": "中"
        }
      ]
    },

    "角色行为约束": {
      "荆杨": {
        "必须遵守": [
          "说话语气要保持警惕和谨慎",
          "不要透露过多的现代知识",
          "要主导对话但不暴露底细"
        ],
        "禁止行为": [
          "不要过于活跃",
          "不要主动表现能力",
          "不要完全信任村长"
        ]
      },
      "赵奇": {
        "必须遵守": [
          "说话语气要保持温和有礼",
          "展现医术要专业但不夸张",
          "要适度展现知识储备"
        ],
        "禁止行为": [
          "不要卖弄知识",
          "不要过于主动",
          "不要完全信任村长"
        ]
      }
    },

    "情节推进约束": {
      "必须推进": [
        "与村长的关系要有进展",
        "六人的能力要有一定展现",
        "三国背景要逐步揭示"
      ],
      "不能推进": [
        "不能完全解决村寨的困难（留到后面）",
        "不能直接接触蜀军（第5章才接触）",
        "不能完全获得村长信任（需要逐步建立）"
      ]
    }
  }
}
```

---

## 骨架文结构

### 1. 章节基本信息
- 章节号
- 章节标题
- 章节目标
- 时间线
- 地点

### 2. 情节框架
#### 开场
- 内容：简要描述
- 时间：具体时间点
- 地点：具体地点
- 角色：参与角色
- 关键动作：关键动作描述
- 场景描写：场景描写要点
- 伏笔埋设：需要埋设的伏笔
- 字数预估：预估字数

#### 发展（可多个段落）
每个段落包含：
- 段落序号
- 内容：段落内容描述
- 时间：具体时间点
- 地点：具体地点
- 角色：参与角色
- 关键动作：关键动作描述
- 关键对话：对话列表（说话人、内容、语气、目的）
- 情节推进：情节如何推进
- 伏笔埋设：需要埋设的伏笔
- 伏笔回收：需要回收的伏笔
- 字数预估：预估字数

#### 高潮
- 内容：高潮内容描述
- 时间：具体时间点
- 地点：具体地点
- 角色：参与角色
- 关键动作：关键动作描述
- 关键对话：对话列表（说话人、内容、语气、目的）
- 情节推进：情节如何推进
- 伏笔埋设：需要埋设的伏笔
- 伏笔回收：需要回收的伏笔
- 字数预估：预估字数

#### 结尾
- 内容：结尾内容描述
- 时间：具体时间点
- 地点：具体地点
- 角色：参与角色
- 关键动作：关键动作描述
- 关键对话：对话列表（说话人、内容、语气、目的）
- 情节推进：情节如何推进
- 伏笔埋设：需要埋设的伏笔
- 字数预估：预估字数

### 3. 整体结构
- 开头：如何开始
- 发展：如何发展
- 高潮：高潮是什么
- 结尾：如何结束

### 4. 角色发展
- 每个角色的本章表现
- 每个角色的能力展现
- 每个角色的关系进展
- 每个角色的下一步发展

### 5. 伏笔安排
- 本回收的伏笔：列表
- 本埋入的伏笔：列表

### 6. 情节连贯性
- 与前文衔接：如何衔接
- 与后文铺垫：如何铺垫
- 时间线连贯：时间线是否连贯
- 地点连贯：地点是否连贯
- 角色状态连贯：角色状态是否连贯

### 7. 创作提示
- 开头建议：如何写开头
- 发展建议：如何写发展
- 高潮建议：如何写高潮
- 结尾建议：如何写结尾
- 需要注意：需要注意的事项

### 8. 字数预估
- 各部分字数预估
- 总计字数
---

## 强制约束清单（关键）

### 1. 禁止写的内容
- 列出绝对不能写的内容
- 主要是前文已分析或介绍过的内容
- 后续章节才应该出现的内容

### 2. 必须达成的事件
- 列出章节大纲中的关键点
- 这些事件必须在本章中达成
- 违反此约束 = 章节创作失败

### 3. 限制条件
#### 时间限制
- 明确时间范围
- 超出时间范围 = 违反约束

#### 地点限制
- 明确地点范围
- 超出地点范围 = 违反约束

#### 角色状态限制
- 每个角色的当前状态
- 角色行为必须符合当前状态

#### 知识水平限制
- 每个角色的当前知识水平
- 角色不能表现出超出知识水平的行为

### 4. 字数范围限制
- 最小字数
- 最大字数
- 建议字数
- 超出范围 = 违反约束

### 5. 伏笔要求
- 必须回收的伏笔列表
- 必须埋入的伏笔列表
- 违反此约束 = 章节创作失败

### 6. 角色行为约束
- 每个角色必须遵守的行为
- 每个角色禁止的行为
- 违反此约束 = 角色OOC

### 7. 情节推进约束
- 必须推进的情节
- 不能推进的情节
- 违反此约束 = 跑题

## 使用流程

### 第一步：读取输入信息
- 读取当前章节信息
- 读取涉及角色列表
- 读取角色卡信息
- 读取角色关系
- 读取世界观设定
- 读取本卷大纲
- 读取前后章节大纲
- 读取chapter_prep输出

### 第二步：设计情节框架
- 设计开场：如何承接前文
- 设计发展：如何推进情节（可多个段落）
- 设计高潮：本章的高潮是什么
- 设计结尾：如何为下一章铺垫

### 第三步：规划角色发展
- 规划每个角色在本章的表现
- 规划每个角色的能力展现
- 规划每个角色的关系进展
- 规划每个角色的下一步发展

### 第四步：安排伏笔
- 安排本回收的伏笔
- 安排本埋入的伏笔

### 第五步：检查情节连贯性
- 检查与前文的衔接
- 检查与后文的铺垫
- 检查时间线连贯性
- 检查地点连贯性
- 检查角色状态连贯性

### 第六步：生成创作提示
- 生成开头建议
- 生成发展建议
- 生成高潮建议
- 生成结尾建议
- 列出需要注意的事项

### 第七步：预估字数
- 预估各部分字数
- 预估总字数

### 第八步：生成强制约束清单（新增）
- 列出禁止写的内容
- 列出必须达成的事件
- 设置限制条件
- 设置字数范围限制
- 设置伏笔要求
- 设置角色行为约束
- 设置情节推进约束

## 检查清单

### 情节合理性
- [ ] 情节发展逻辑清晰
- [ ] 情节推进合理
- [ ] 情节符合大纲要求
- [ ] 情节符合世界观设定

### 角色一致性
- [ ] 角色行为符合角色卡
- [ ] 角色对话符合角色设定
- [ ] 角色关系发展合理
- [ ] 角色能力展现适度

### 伏笔合理性
- [ ] 伏笔埋设自然
- [ ] 伏笔回收合理
- [ ] 伏笔与主线相关
- [ ] 伏笔有回收价值

### 连贯性
- [ ] 与前文自然衔接
- [ ] 与后文合理铺垫
- [ ] 时间线连贯
- [ ] 地点连贯
- [ ] 角色状态连贯

### 可操作性
- [ ] 骨架文具体可操作
- [ ] 对话设计合理
- [ ] 动作设计合理
- [ ] 场景描写要点清晰

### 约束清单完整性（新增）
- [ ] 禁止写的内容列全
- [ ] 必须达成的事件列全
- [ ] 限制条件明确
- [ ] 字数范围合理
- [ ] 伏笔要求明确
- [ ] 角色行为约束清晰
- [ ] 情节推进约束清晰

## 常见错误

### 情节错误
- **情节不合理**：情节发展不符合逻辑
- **情节不符合大纲**：情节偏离大纲要求
- **情节冲突**：情节之间存在冲突
- **情节过于简单**：情节过于简单，缺乏层次

### 角色错误
- **角色OOC**：角色行为不符合设定
- **角色对话不符**：角色对话不符合性格
- **角色关系不当**：角色关系发展不合理
- **角色能力过当**：角色能力展现过度

### 伏笔错误
- **伏笔过于明显**：伏笔埋设过于明显
- **伏笔过于隐晦**：伏笔埋设过于隐晦
- **伏笔回收突兀**：伏笔回收过于突兀
- **伏笔与主线无关**：伏笔与主线无关

### 连贯性错误
- **与前文不衔接**：与前文不自然衔接
- **与后文不铺垫**：与后文不合理铺垫
- **时间线不连贯**：时间线不连贯
- **地点不连贯**：地点不连贯

### 约束清单错误（新增）
- **禁止内容不全**：禁止写的内容列不全
- **必须事件不全**：必须达成的事件列不全
- **限制不明确**：限制条件不明确
- **约束不合理**：约束条件不合理
- **约束过于严格**：约束过于严格，影响创作自由
- **约束过于宽松**：约束过于宽松，起不到防跑题的作用


## 注意事项
1. 仔细阅读大纲，确保情节符合大纲要求
2. 仔细阅读角色卡，确保角色行为符合设定
3. 仔细阅读前后章节大纲，确保情节连贯
4. 骨架文要具体可操作，不要过于抽象
5. 对话设计要符合角色设定
6. 动作设计要符合场景和角色
7. 伏笔埋设要自然，不要过于明显
8. 伏笔回收要合理，不要过于突兀
9. 确保情节的连贯性
10. 预估字数要合理，不要偏差过大
11. **约束清单要全面明确，确保能防跑题**
12. **约束清单要合理平衡，既要防跑题又要留创作空间**
13. **约束清单要可执行，便于创作时检查**

---

## 相关Skill

- **chapter_prep**：使用chapter_prep输出作为输入
- **continuation_agent**：将骨架文和约束清单传递给continuation_agent
- **auto_check**：在创作后使用auto_check检查质量
- **world_consistency**：确保骨架文符合世界观设定


