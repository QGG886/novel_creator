# 角色语音分析Skill

## 功能
分析本章涉及角色的角色卡，提取每个角色的说话语气、行为特征和称谓习惯，确保在本章创作时角色的言行符合当前环境和阶段。

## 使用场景
- 创作任何章节前
- 确保角色对话的自然性和一致性
- 检查角色行为OOC（Out of Character）
- 维持角色声音的独特性

## 输入格式
```json
{
  "当前章节信息": {
    "章节号": 4,
    "章节大纲": "第4章的大纲内容",
    "环境": "村长家中",
    "时间": "第2天下午",
    "阶段": "初入村寨阶段"
  },
  "涉及角色": ["荆杨", "赵奇", "村长"],
  "角色卡": {
    "荆杨": {
      "姓名": "荆杨",
      "性格": "谨慎、善于观察、有领导力",
      "背景": "现代大学生，喜欢历史",
      "说话特点": "简洁有力，逻辑清晰，不轻易表态",
      "行为特点": "观察周围，保持警惕"
    },
    "赵奇": {
      "姓名": "赵奇",
      "性格": "沉稳儒雅，善于分析",
      "背景": "现代医学生",
      "说话特点": "温和有礼，知识渊博",
      "行为特点": "分析问题，提供解决方案"
    },
    "村长": {
      "姓名": "村长",
      "性格": "沉稳谨慎，有威望",
      "背景": "村长，经历过战乱",
      "说话特点": "稳重，有威严，不轻易信任外人",
      "行为特点": "观察六人，试探他们的底细"
    }
  },
  "角色关系": {
    "荆杨-赵奇": "互相尊重，荆杨逐渐展现领导力",
    "荆杨-村长": "初步建立信任，村长在试探",
    "赵奇-村长": "礼貌交流，建立初步印象"
  },
  "已写章节": [
    {
      "章节号": 1,
      "文件路径": "output/chapters/第1卷_第1章_六人奇遇.md"
    },
    {
      "章节号": 2,
      "文件路径": "output/chapters/第1卷_第2章_初见炊烟.md"
    },
    {
      "章节号": 3,
      "文件路径": "output/chapters/第1卷_第3章_初入村寨.md"
    }
  ]
}
```

## 输出格式
```json
{
  "状态": "成功",
  "角色语音分析": {
    "荆杨": {
      "说话语气": "简洁有力，逻辑清晰，不轻易表态",
      "常用语汇": ["让我想想", "从目前的情况看", "我觉得"],
      "句式特点": "多为陈述句，少用感叹句",
      "停顿习惯": "说话前会思考，有短暂停顿",
      "语气变化": "当前阶段较为谨慎，不完全信任",
      "本章环境下的语气": "保持礼貌但警惕，不透露过多信息"
    },
    "赵奇": {
      "说话语气": "温和有礼，知识渊博",
      "常用语汇": ["根据我的观察", "从医学角度看", "我认为"],
      "句式特点": "多用委婉句，语气缓和",
      "停顿习惯": "说话流畅，思考时稍作停顿",
      "语气变化": "当前阶段愿意交流，展现能力",
      "本章环境下的语气": "尊重长辈，展现专业知识"
    },
    "村长": {
      "说话语气": "稳重，有威严，不轻易信任",
      "常用语汇": ["嗯", "你们", "外人"],
      "句式特点": "多用问句试探，少直接表态",
      "停顿习惯": "说话缓慢，思考时间长",
      "语气变化": "当前阶段试探性强，逐步观察",
      "本章环境下的语气": "试探性强，观察六人反应"
    }
  },
  "角色行为分析": {
    "荆杨": {
      "行为特点": "观察周围，保持警惕",
      "肢体语言": "身体微向前倾，目光专注",
      "本章环境下的行为": "观察村长的表情和动作，注意村民的反应",
      "需要注意的事项": "不要过于紧张，保持自然",
      "避免的行为": "不要过多提问，不要暴露现代知识"
    },
    "赵奇": {
      "行为特点": "分析问题，提供解决方案",
      "肢体语言": "温和微笑，眼神真诚",
      "本章环境下的行为": "礼貌回应，展现医术和知识",
      "需要注意的事项": "不要过于表现，要适度",
      "避免的行为": "不要卖弄知识，不要过于主动"
    },
    "村长": {
      "行为特点": "观察六人，试探他们的底细",
      "肢体语言": "坐在主位，目光扫视",
      "本章环境下的行为": "提问试探，观察回答",
      "需要注意的事项": "不要过于严厉，要适度",
      "避免的行为": "不要直接拒绝，不要过早下结论"
    }
  },
  "角色称谓分析": {
    "荆杨对赵奇": {
      "称谓": "赵兄",
      "语境": "正式场合",
      "语气": "尊重",
      "本章环境下的使用": "保持尊重，但不过分客气"
    },
    "荆杨对村长": {
      "称谓": "村长",
      "语境": "正式场合",
      "语气": "礼貌",
      "本章环境下的使用": "保持礼貌，但保持距离"
    },
    "赵奇对荆杨": {
      "称谓": "荆兄",
      "语境": "正式场合",
      "语气": "尊重",
      "本章环境下的使用": "尊重，但不过分"
    },
    "赵奇对村长": {
      "称谓": "村长",
      "语境": "正式场合",
      "语气": "恭敬",
      "本章环境下的使用": "保持恭敬，展现晚辈礼节"
    },
    "村长对荆杨": {
      "称谓": "这位年轻人",
      "语境": "试探阶段",
      "语气": "试探",
      "本章环境下的使用": "保持距离，观察反应"
    },
    "村长对赵奇": {
      "称谓": "这位大夫",
      "语境": "试探阶段",
      "语气": "试探",
      "本章环境下的使用": "试探医术，观察能力"
    }
  },
  "角色互动分析": {
    "荆杨-赵奇": {
      "互动方式": "眼神交流，简短对话",
      "本章环境下的互动": "荆杨主导，赵奇配合",
      "需要注意的事项": "默契配合，不过分交流"
    },
    "荆杨-村长": {
      "互动方式": "问答，观察",
      "本章环境下的互动": "荆杨回答简洁，村长试探",
      "需要注意的事项": "荆杨不要透露过多"
    },
    "赵奇-村长": {
      "互动方式": "礼貌交流",
      "本章环境下的互动": "赵奇展现能力，村长观察",
      "需要注意的事项": "赵奇要适度，不过分表现"
    }
  },
  "创作指导": {
    "对话注意事项": [
      "荆杨说话要简洁有力，不要多言",
      "赵奇说话要温和有礼，展现知识",
      "村长说话要稳重试探，不轻易表态"
    ],
    "行为注意事项": [
      "荆杨保持警惕，注意观察",
      "赵奇保持温和，适度展现能力",
      "村长保持试探，观察六人"
    ],
    "称谓注意事项": [
      "荆杨对赵奇称'赵兄'，对村长称'村长'",
      "赵奇对荆杨称'荆兄'，对村长称'村长'",
      "村长对荆杨称'这位年轻人'，对赵奇称'这位大夫'"
    ],
    "避免事项": [
      "不要让荆杨过于紧张",
      "不要让赵奇过于表现",
      "不要让村长过于严厉"
    ]
  },
  "潜在风险": [
    "风险1：角色对话语气不符合角色设定",
    "风险2：角色行为不符合当前环境",
    "风险3：角色称谓不符合当前阶段",
    "风险4：角色互动不符合关系设定"
  ]
}
```

## 分析维度

### 1. 说话语气分析
- **语气特点**：每个角色的说话语气（简洁/温和/严厉/试探等）
- **常用语汇**：每个角色常用的词汇和短语
- **句式特点**：每个角色常用的句式（陈述/疑问/感叹等）
- **停顿习惯**：每个角色的停顿习惯（思考/流畅/犹豫等）
- **语气变化**：角色在不同阶段的语气变化
- **本章环境下的语气**：在本章特定环境下，角色应该表现出的语气

### 2. 行为分析
- **行为特点**：每个角色的行为特征（观察/分析/试探等）
- **肢体语言**：每个角色的肢体语言（眼神/手势/姿态等）
- **本章环境下的行为**：在本章特定环境下，角色应该表现出的行为
- **需要注意的事项**：在本章创作时需要注意的事项
- **避免的行为**：在本章创作时需要避免的行为

### 3. 称谓分析
- **称谓类型**：每个角色对不同角色的称谓
- **语境使用**：不同语境下的称谓使用
- **语气使用**：不同语气下的称谓使用
- **本章环境下的使用**：在本章特定环境下，角色应该使用的称谓

### 4. 互动分析
- **互动方式**：角色之间的互动方式（对话/眼神/动作等）
- **本章环境下的互动**：在本章特定环境下，角色之间的互动方式
- **需要注意的事项**：在本章创作时需要注意的互动事项

## 检查清单

### 角色一致性
- [ ] 角色说话语气符合角色卡设定
- [ ] 角色行为符合性格设定
- [ ] 角色称谓符合关系设定
- [ ] 角色互动符合关系发展

### 环境适配性
- [ ] 角色说话语气符合当前环境
- [ ] 角色行为符合当前环境
- [ ] 角色称谓符合当前环境
- [ ] 角色互动符合当前环境

### 阶段适配性
- [ ] 角色说话语气符合当前阶段
- [ ] 角色行为符合当前阶段
- [ ] 角色称谓符合当前阶段
- [ ] 角色互动符合当前阶段

### 自然性
- [ ] 角色对话自然流畅
- [ ] 角色行为合情合理
- [ ] 角色称谓得体恰当
- [ ] 角色互动真实可信

## 使用流程

### 第一步：读取输入信息
- 读取当前章节信息（章节号、大纲、环境、时间、阶段）
- 读取涉及角色列表
- 读取角色卡信息
- 读取角色关系
- 读取已写章节内容

### 第二步：分析说话语气
- 从角色卡中提取每个角色的说话特点
- 从已写章节中提取角色之前的说话语气
- 分析角色在当前阶段的语气变化
- 确定角色在本章环境下的说话语气

### 第三步：分析行为特点
- 从角色卡中提取每个角色的行为特点
- 从已写章节中提取角色之前的行为表现
- 分析角色在当前阶段的行为变化
- 确定角色在本章环境下的行为表现

### 第四步：分析称谓使用
- 从角色关系中提取角色之间的称谓
- 从已写章节中提取角色之前的称谓使用
- 分析角色在当前阶段的称谓变化
- 确定角色在本章环境下的称谓使用

### 第五步：分析角色互动
- 从角色关系中提取角色之间的互动方式
- 从已写章节中提取角色之前的互动表现
- 分析角色在当前阶段的互动变化
- 确定角色在本章环境下的互动方式

### 第六步：生成创作指导
- 生成对话注意事项
- 生成行为注意事项
- 生成称谓注意事项
- 列出避免事项

### 第七步：识别潜在风险
- 识别角色对话语气不符合设定的风险
- 识别角色行为不符合环境的风险
- 识别角色称谓不符合阶段的风险
- 识别角色互动不符合关系的风险

## 常见错误

### 说话语气错误
- **语气不符**：角色说话语气不符合角色设定
- **语气单一**：角色说话语气过于单一，没有变化
- **语气突兀**：角色说话语气突然变化，没有过渡
- **语气与环境不符**：角色说话语气不符合当前环境

### 行为错误
- **行为不符**：角色行为不符合性格设定
- **行为突兀**：角色行为突然变化，没有过渡
- **行为OOC**：角色行为与之前的设定矛盾
- **行为与环境不符**：角色行为不符合当前环境

### 称谓错误
- **称谓不符**：角色称谓不符合关系设定
- **称谓突兀**：角色称谓突然变化，没有过渡
- **称谓与环境不符**：角色称谓不符合当前环境
- **称谓与阶段不符**：角色称谓不符合当前阶段

### 互动错误
- **互动不符**：角色互动不符合关系设定
- **互动突兀**：角色互动突然变化，没有过渡
- **互动与环境不符**：角色互动不符合当前环境
- **互动与阶段不符**：角色互动不符合当前阶段

## 注意事项
1. 仔细阅读角色卡，确保理解角色设定
2. 仔细阅读已写章节，确保理解角色之前的表现
3. 注意角色在不同阶段的语气和行为变化
4. 注意角色在不同环境下的语气和行为变化
5. 保持角色说话语气的独特性和一致性
6. 保持角色行为的独特性和一致性
7. 保持角色称谓的得体性和一致性
8. 保持角色互动的真实性和一致性
9. 识别潜在风险，提前规避
10. 保持客观，不要带入主观判断

## 与其他Skill的配合

- **chapter_context_analysis**：使用前文角色表现分析结果
- **skeleton_outline**：在骨架文中设计角色对话和行为
- **chapter_write**：在创作时遵循角色语音分析结果
- **dialogue_naturalization**：检查对话自然度
- **dialogue_agent**：优化角色对话

## 示例输出

```json
{
  "状态": "成功",
  "角色语音分析": {
    "荆杨": {
      "说话语气": "简洁有力，逻辑清晰，不轻易表态",
      "常用语汇": ["让我想想", "从目前的情况看", "我觉得"],
      "句式特点": "多为陈述句，少用感叹句",
      "停顿习惯": "说话前会思考，有短暂停顿",
      "语气变化": "当前阶段较为谨慎，不完全信任",
      "本章环境下的语气": "保持礼貌但警惕，不透露过多信息"
    },
    "赵奇": {
      "说话语气": "温和有礼，知识渊博",
      "常用语汇": ["根据我的观察", "从医学角度看", "我认为"],
      "句式特点": "多用委婉句，语气缓和",
      "停顿习惯": "说话流畅，思考时稍作停顿",
      "语气变化": "当前阶段愿意交流，展现能力",
      "本章环境下的语气": "尊重长辈，展现专业知识"
    },
    "村长": {
      "说话语气": "稳重，有威严，不轻易信任",
      "常用语汇": ["嗯", "你们", "外人"],
      "句式特点": "多用问句试探，少直接表态",
      "停顿习惯": "说话缓慢，思考时间长",
      "语气变化": "当前阶段试探性强，逐步观察",
      "本章环境下的语气": "试探性强，观察六人反应"
    }
  },
  "角色行为分析": {
    "荆杨": {
      "行为特点": "观察周围，保持警惕",
      "肢体语言": "身体微向前倾，目光专注",
      "本章环境下的行为": "观察村长的表情和动作，注意村民的反应",
      "需要注意的事项": "不要过于紧张，保持自然",
      "避免的行为": "不要过多提问，不要暴露现代知识"
    },
    "赵奇": {
      "行为特点": "分析问题，提供解决方案",
      "肢体语言": "温和微笑，眼神真诚",
      "本章环境下的行为": "礼貌回应，展现医术和知识",
      "需要注意的事项": "不要过于表现，要适度",
      "避免的行为": "不要卖弄知识，不要过于主动"
    },
    "村长": {
      "行为特点": "观察六人，试探他们的底细",
      "肢体语言": "坐在主位，目光扫视",
      "本章环境下的行为": "提问试探，观察回答",
      "需要注意的事项": "不要过于严厉，要适度",
      "避免的行为": "不要直接拒绝，不要过早下结论"
    }
  },
  "角色称谓分析": {
    "荆杨对赵奇": {
      "称谓": "赵兄",
      "语境": "正式场合",
      "语气": "尊重",
      "本章环境下的使用": "保持尊重，但不过分客气"
    },
    "荆杨对村长": {
      "称谓": "村长",
      "语境": "正式场合",
      "语气": "礼貌",
      "本章环境下的使用": "保持礼貌，但保持距离"
    },
    "赵奇对荆杨": {
      "称谓": "荆兄",
      "语境": "正式场合",
      "语气": "尊重",
      "本章环境下的使用": "尊重，但不过分"
    },
    "赵奇对村长": {
      "称谓": "村长",
      "语境": "正式场合",
      "语气": "恭敬",
      "本章环境下的使用": "保持恭敬，展现晚辈礼节"
    },
    "村长对荆杨": {
      "称谓": "这位年轻人",
      "语境": "试探阶段",
      "语气": "试探",
      "本章环境下的使用": "保持距离，观察反应"
    },
    "村长对赵奇": {
      "称谓": "这位大夫",
      "语境": "试探阶段",
      "语气": "试探",
      "本章环境下的使用": "试探医术，观察能力"
    }
  },
  "角色互动分析": {
    "荆杨-赵奇": {
      "互动方式": "眼神交流，简短对话",
      "本章环境下的互动": "荆杨主导，赵奇配合",
      "需要注意的事项": "默契配合，不过分交流"
    },
    "荆杨-村长": {
      "互动方式": "问答，观察",
      "本章环境下的互动": "荆杨回答简洁，村长试探",
      "需要注意的事项": "荆杨不要透露过多"
    },
    "赵奇-村长": {
      "互动方式": "礼貌交流",
      "本章环境下的互动": "赵奇展现能力，村长观察",
      "需要注意的事项": "赵奇要适度，不过分表现"
    }
  },
  "创作指导": {
    "对话注意事项": [
      "荆杨说话要简洁有力，不要多言",
      "赵奇说话要温和有礼，展现知识",
      "村长说话要稳重试探，不轻易表态"
    ],
    "行为注意事项": [
      "荆杨保持警惕，注意观察",
      "赵奇保持温和，适度展现能力",
      "村长保持试探，观察六人"
    ],
    "称谓注意事项": [
      "荆杨对赵奇称'赵兄'，对村长称'村长'",
      "赵奇对荆杨称'荆兄'，对村长称'村长'",
      "村长对荆杨称'这位年轻人'，对赵奇称'这位大夫'"
    ],
    "避免事项": [
      "不要让荆杨过于紧张",
      "不要让赵奇过于表现",
      "不要让村长过于严厉"
    ]
  },
  "潜在风险": [
    "风险1：角色对话语气不符合角色设定",
    "风险2：角色行为不符合当前环境",
    "风险3：角色称谓不符合当前阶段",
    "风险4：角色互动不符合关系设定"
  ]
}
```

## 更新日志

| 版本 | 日期 | 更新内容 |
|------|------|----------|
| 1.0 | 2026-01-29 | 初始版本，建立角色语音分析功能 |
