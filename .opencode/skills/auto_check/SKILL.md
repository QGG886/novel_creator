# 自动检查Skill（重构版）

## 功能
一次性完成章节的多维度质量检查，整合对话自然度、节奏分析、情感分析和主题分析，后台自动运行，只输出简要摘要。

## 使用场景
- 章节创作完成后自动运行（后台）
- 对章节质量进行快速检查
- 识别需要修复的问题
- 用户无感知，仅在有问题时输出简要问题列表

## 输入格式
```json
{
  "章节内容": "章节完整文本",
  "章节信息": {
    "序号": "1-4",
    "章节号": 4,
    "章节大纲": "第4章的大纲内容",
    "章节目标": "本章要达成的目标",
    "主要事件": "本章发生的核心事件"
  },
  "角色卡": {
    "角色1": "完整信息",
    "角色2": "完整信息"
  },
  "文风指南": "文风指南内容（如有）",
  "本章在本卷中的作用": "本章在本卷中的定位和作用",
  "关注维度": ["对话自然度", "节奏", "情感", "主题"]
}
```

## 输出格式
```json
{
  "状态": "成功",
  "检查结果": "通过/不通过",
  "问题摘要": {
    "对话自然度": {
      "状态": "通过/不通过",
      "问题": ["问题1", "问题2"]
    },
    "节奏": {
      "状态": "通过/不通过",
      "问题": ["问题1", "问题2"]
    },
    "情感": {
      "状态": "通过/不通过",
      "问题": ["问题1", "问题2"]
    },
    "主题": {
      "状态": "通过/不通过",
      "问题": ["问题1", "问题2"]
    }
  },
  "简要建议": ["建议1", "建议2", "建议3"],
  "总体评价": "章节质量总体评价（优秀/良好/一般/需要改进）"
}
```

## 检查维度

### 1. 对话自然度检查（来自dialogue_naturalization）

#### 检查项
- 口语化表达：对话是否口语化，自然流畅
- 句式变化：句式是否多样，避免单一
- 语气和停顿：角色语气是否符合情境，停顿是否自然
- 角色个性：对话是否体现角色个性
- 情境匹配：对话是否符合当前情境
- 互动自然：角色之间的互动是否自然

#### 输出
- 状态：通过/不通过
- 问题列表（如有问题）：3-5个要点

### 2. 节奏分析检查（来自pacing_analysis）

#### 检查项
- 信息密度：信息密集度是否合适
- 动作密度：动作场景的分布是否合理
- 情感强度：情感强度的变化是否合理
- 冲突强度：冲突的出现和解决是否合理
- 节奏类型：节奏类型是否适合本章
- 高潮位置：高潮位置是否合适（75%-85%）

#### 输出
- 状态：通过/不通过
- 问题列表（如有问题）：3-5个要点

### 3. 情感分析检查（来自emotional_arc）

#### 检查项
- 整体情感：主导情感是否清晰
- 角色情感：角色情感变化是否合理
- 情感转换：情感转换是否自然
- 情感积累：情感积累是否充分
- 情感爆发：情感爆发是否合理
- 情感共鸣：是否能引起读者情感共鸣

#### 输出
- 状态：通过/不通过
- 问题列表（如有问题）：3-5个要点

### 4. 主题分析检查（来自theme_analysis）

#### 检查项
- 核心主题：是否体现核心主题
- 次要主题：是否体现次要主题（如有）
- 隐含主题：是否有隐含主题（如有）
- 主题深度：主题表达是否有深度
- 主题一致性：主题表达是否一致
- 主题层次：主题层次是否清晰

#### 输出
- 状态：通过/不通过
- 问题列表（如有问题）：3-5个要点

## 使用流程

### 第一步：读取输入信息
- 读取章节内容
- 读取章节信息
- 读取角色卡
- 读取文风指南（如有）
- 读取关注维度

### 第二步：对话自然度检查
- 检查口语化表达
- 检查句式变化
- 检查语气和停顿
- 检查角色个性
- 检查情境匹配
- 检查互动自然度
- 判断是否通过
- 生成问题列表（如有）

### 第三步：节奏分析检查
- 检查信息密度
- 检查动作密度
- 检查情感强度
- 检查冲突强度
- 检查节奏类型
- 检查高潮位置
- 判断是否通过
- 生成问题列表（如有）

### 第四步：情感分析检查
- 检查整体情感
- 检查角色情感
- 检查情感转换
- 检查情感积累
- 检查情感爆发
- 检查情感共鸣
- 判断是否通过
- 生成问题列表（如有）

### 第五步：主题分析检查
- 检查核心主题
- 检查次要主题（如有）
- 检查隐含主题（如有）
- 检查主题深度
- 检查主题一致性
- 检查主题层次
- 判断是否通过
- 生成问题列表（如有）

### 第六步：生成简要建议
- 综合四个维度的检查结果
- 生成3-5个简要建议
- 给出总体评价

### 第七步：生成最终输出
- 输出检查结果（通过/不通过）
- 输出问题摘要
- 输出简要建议
- 输出总体评价

## 检查标准

### 通过标准
- 所有维度都通过，或
- 只有不通过维度的都是次要问题，不影响阅读体验

### 不通过标准
- 有1个或多个维度存在重要问题，或
- 有多个维度存在次要问题

### 问题分级
- **重要问题**：严重影响阅读体验，必须修复
- **次要问题**：轻微影响阅读体验，建议修复

## 注意事项
1. 后台自动运行，用户无感知
2. 只输出简要摘要，不生成详细报告
3. 问题列表控制在3-5个要点
4. 给出简要建议，帮助用户修复
5. 判断标准要客观，避免主观判断
6. 不要过于严格，允许一定的创作自由
7. 重点关注影响阅读体验的问题

## 与其他Skill/Agent的配合

- **golden_three_chapters_agent**：黄金三章创作完成后自动调用本Skill
- **continuation_agent**：续写章节创作完成后自动调用本Skill
- **quality_agent**：本Skill不通过时，交由quality_agent修复
- **plot_hole_detection**：本Skill检查通过后，调用plot_hole_detection
- **world_consistency**：本Skill检查通过后，调用world_consistency

## 输出示例

### 通过示例
```json
{
  "状态": "成功",
  "检查结果": "通过",
  "问题摘要": {
    "对话自然度": {
      "状态": "通过",
      "问题": []
    },
    "节奏": {
      "状态": "通过",
      "问题": []
    },
    "情感": {
      "状态": "通过",
      "问题": []
    },
    "主题": {
      "状态": "通过",
      "问题": []
    }
  },
  "简要建议": [
    "对话自然流畅，角色个性明显",
    "节奏控制良好，高潮位置合适",
    "情感表达充分，能引起共鸣",
    "主题表达清晰，有一定的深度"
  ],
  "总体评价": "优秀"
}
```

### 不通过示例
```json
{
  "状态": "成功",
  "检查结果": "不通过",
  "问题摘要": {
    "对话自然度": {
      "状态": "不通过",
      "问题": [
        "部分对话过于书面化",
        "角色语气区分不明显"
      ]
    },
    "节奏": {
      "状态": "通过",
      "问题": []
    },
    "情感": {
      "状态": "不通过",
      "问题": [
        "情感转换略显突兀",
        "情感积累不够充分"
      ]
    },
    "主题": {
      "状态": "通过",
      "问题": []
    }
  },
  "简要建议": [
    "优化对话表达，增加口语化",
    "调整角色语气，增强区分度",
    "优化情感转换，增加过渡",
    "补充情感铺垫，增强积累"
  ],
  "总体评价": "一般"
}
```

## 更新日志

| 版本 | 日期 | 更新内容 |
|------|------|----------|
| 1.0 | 2026-01-30 | 初始版本，合并dialogue_naturalization、pacing_analysis、emotional_arc、theme_analysis |

## 章节检查清单模板

```markdown
# 章节检查清单

## 内容检查
- [ ] 章节目标达成
- [ ] 情节推进合理
- [ ] 冲突有意义
- [ ] 对话自然流畅

## 文风检查
- [ ] 遵循文风指南
- [ ] 语言表达准确
- [ ] 句式符合规范

## 连贯性检查
- [ ] 与前后章节衔接
- [ ] 角色行为一致
- [ ] 时间地点准确
- [ ] 无逻辑矛盾

## 字数检查
- [ ] 字数符合要求
- [ ] 长度适当
```
