---
name: setting_check
description: 检查设定漏洞，包括设定矛盾、未解释的能力/知识等，发现问题并提供具体修改方案
---

# 设定漏洞检查Skill

## 功能

检查章节中的世界观设定是否矛盾，能力/知识来源是否有说明，发现问题并提供具体的修改方案。

---

## 检查维度

### 1. 设定前后矛盾
- 同一设定在不同地方的描述是否一致

### 2. 未解释的能力来源
- 角色使用的能力是否有来源说明

### 3. 未解释的知识来源
- 角色掌握的知识是否有来源说明

### 4. 规则违反无解释
- 违反设定规则是否有解释

---

## 输入格式

```json
{
  "章节内容": "章节完整文本",
  "章节信息": {
    "章节号": 4
  },
  "世界观": "完整的世界观设定",
  "已写章节": ["章节1", "章节2", "章节3"]
}
```

---

## 输出格式

```json
{
  "状态": "成功",
  "检查结果": "通过/不通过",
  "问题清单": [
    {
      "问题ID": "S-001",
      "类型": "设定矛盾/能力未解释/知识未解释",
      "严重程度": "A/B/C",
      "位置": {
        "章节号": 4,
        "段落位置": "第3段"
      },
      "问题描述": "角色使用'火球术'，但之前未设定他掌握此技能",
      "影响分析": "设定矛盾，读者困惑",
      "修改方案": {
        "方案类型": "增加/统一",
        "具体操作": "增加角色学习'火球术'的情节",
        "修改后内容": "修改后的内容",
        "操作说明": "1. 在前文中增加学习情节；或 2. 修改此处为角色已知的能力"
      },
      "可自动修复": false
    }
  ]
}
```

---

## 修改方案生成规则

### 设定前后矛盾

**问题示例**：同一设定在不同章节描述不同

**修改方案**：
- 方案类型：统一
- 具体操作：统一设定描述
- 修改后内容：
  - 选择一个版本作为标准
  - 修改其他地方使其一致
- 操作说明：
  1. 对比不同描述
  2. 确定采用哪个版本
  3. 统一所有描述

### 未解释的能力来源

**问题示例**：角色突然使用新能力

**修改方案**：
- 方案类型：增加
- 具体操作：增加能力来源说明
- 修改后内容：
  - 在前文中增加学习/获得能力的情节
- 操作说明：
  1. 分析能力是什么
  2. 设计合理的获得方式
  3. 增加相关情节

---

## 严重程度分级

### A类（严重）
- 核心设定矛盾
- 重要能力无来源
- 规则被违反无解释

### B类（中等）
- 次要设定不一致
- 一般能力未解释

### C类（轻微）
- 细节设定可以更统一
