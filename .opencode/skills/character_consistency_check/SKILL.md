---
name: character_consistency_check
description: 检查角色一致性，包括行为、能力、记忆、关系等，发现问题并提供具体修改方案
metadata:
  language: markdown
  framework: novel-creation
---

# 角色一致性检查Skill

## 功能

检查章节中的角色行为、能力、记忆、关系是否与设定一致，发现问题并提供具体的修改方案。

---

## 检查维度

### 1. 角色行为OOC
- 角色行为是否符合性格设定

### 2. 能力突然变化
- 角色能力是否突然变化

### 3. 记忆出现问题
- 角色记忆是否一致

### 4. 角色关系矛盾
- 角色关系描述是否一致

---

## 输入格式

```json
{
  "章节内容": "章节完整文本",
  "章节信息": {
    "章节号": 4
  },
  "角色卡": {
    "角色名": {
      "性格": "完整性格描述",
      "能力": "能力列表",
      "重要记忆": "记忆列表",
      "关系": "关系列表"
    }
  },
  "已写章节": ["章节1", "章节2", "章节3"]
}
```

---

## 输出格式

```json
{
  "状态": "成功",
  "检查结果": "通过/不通过",
  "问题清单": [
    {
      "问题ID": "C-001",
      "类型": "行为OOC/能力变化/记忆问题/关系矛盾",
      "严重程度": "A/B/C",
      "位置": {
        "章节号": 4,
        "段落位置": "第5段"
      },
      "问题描述": "李明性格设定为'内向、害羞'，但主动与陌生人搭话",
      "影响分析": "角色OOC，破坏角色一致性",
      "修改方案": {
        "方案类型": "调整/增加",
        "具体操作": "调整行为或增加动机",
        "修改后内容": "修改后的内容",
        "操作说明": "方案1：修改为被动回应；方案2：增加特殊动机说明为什么会主动"
      },
      "可自动修复": false
    }
  ]
}
```

---

## 修改方案生成规则

### 角色行为OOC

**问题示例**：角色行为与性格设定不符

**修改方案**：
- 方案类型：调整或增加
- 具体操作：修改行为或增加动机
- 修改后内容：
  - 方案1：修改为符合性格的行为
  - 方案2：增加特殊动机
- 操作说明：
  1. 分析角色性格
  2. 判断是修改行为还是增加动机
  3. 实施修改

### 能力突然变化

**问题示例**：角色突然拥有新能力

**修改方案**：
- 方案类型：增加或删除
- 具体操作：增加获得能力的情节或删除该能力使用
- 修改后内容：
  - 在前文中增加获得能力的情节
- 操作说明：
  1. 分析能力变化是否合理
  2. 决定是增加解释还是删除

---

## 严重程度分级

### A类（严重）
- 主要角色严重OOC
- 核心能力突然变化

### B类（中等）
- 次要角色OOC
- 一般能力不一致

### C类（轻微）
- 细节行为可以更符合性格
