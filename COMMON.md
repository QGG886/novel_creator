# 通用规范文档

本文档定义了所有Agent和Skill共用的规范、标准和检查清单，避免重复内容。

---

## 输入输出规范

### 输入格式
所有Agent和Skill的输入应遵循以下结构：
```json
{
  "任务类型": "具体任务",
  "上下文": "相关的上下文信息",
  "输入内容": "具体输入数据",
  "特殊要求": "用户的特殊要求（如有）"
}
```

### 输出格式
所有Agent和Skill的输出应遵循以下结构：
```json
{
  "状态": "成功/部分成功/失败",
  "输出内容": "具体的输出数据",
  "改动说明": "对原有内容的改动说明（如有）",
  "问题清单": ["发现的问题列表"],
  "后续建议": ["建议的下一步操作"]
}
```

---

## 质量检查清单

### 内容质量
- [ ] 内容完整，无缺失要素
- [ ] 逻辑清晰，无矛盾之处
- [ ] 符合设定，与已知信息一致
- [ ] 达成既定目标

### 表达质量
- [ ] 语言准确，无明显错误
- [ ] 表达清晰，易于理解
- [ ] 符合文风指南（如有）
- [ ] 有吸引力，不枯燥

### 连贯性
- [ ] 与前后内容衔接自然
- [ ] 时间线连贯
- [ ] 角色行为一致
- [ ] 设定一致

### 格式规范
- [ ] 符合输出格式要求
- [ ] 文件命名正确
- [ ] 标题层级规范
- [ ] 标点符号正确

---

## 工作流程

### 标准流程
1. **理解需求**：明确任务目标和要求
2. **收集信息**：获取必要的上下文和数据
3. **执行任务**：按照规范执行具体工作
4. **质量检查**：使用检查清单验证结果
5. **输出结果**：按照输出格式返回结果

### 交互流程（仅Agent）
1. **分析当前状态**：了解已完成的工作
2. **识别缺失信息**：找出需要补充的内容
3. **提出引导问题**：生成针对性的问题（3-5个）
4. **收集用户反馈**：理解用户的回答
5. **调整工作方向**：根据反馈调整
6. **继续创作**：执行核心创造性工作

---

## 注意事项

### 通用原则
- 保持简洁，避免过度冗长
- 专注于核心任务，不要偏离
- 尊重用户的选择和要求
- 确保输出质量符合标准
- 及时反馈问题和建议

### Agent特有
- 需要时主动提出引导问题
- 不要一次性生成过多内容
- 给用户确认和修改的机会
- 保持互动，避免单方面输出

### Skill特有
- 明确的输入输出定义
- 可重复的标准化流程
- 自动化的检查和验证
- 清晰的错误提示和建议

---

## 错误处理

### 输入错误
- 缺少必要信息：提示补充
- 格式不正确：说明正确格式
- 内容矛盾：指出矛盾之处

### 执行错误
- 任务无法完成：说明原因
- 发现问题：列出问题清单
- 需要用户决策：明确说明

### 输出错误
- 格式错误：按正确格式重新输出
- 内容不全：说明缺失部分
- 质量不达标：说明改进建议

---

## 文件命名规范

### Agent输出
- 大纲文件：`第{卷号}卷_{卷标题}.md`
- 角色文件：`{角色名}.md`
- 章节文件：`第{卷号}卷_第{章号}章_{标题}.md`
- 世界观文件：按维度命名（如`geography.md`, `history.md`）

### Skill输出
- 报告文件：`{报告类型}_报告.md`
- 检查结果：`{检查类型}_检查_{时间戳}.md`
- 统计数据：`{统计类型}_统计_{时间戳}.json`

---

## 版本管理

### 里程碑版本
- 大纲确定后
- 角色设定完成
- 每卷完成
- 全书完成

### 编辑版本
- 初稿完成
- 各轮编辑完成
- 最终定稿

### 实验版本
- 大幅改动尝试
- 不同结局版本
- 风格调整版本

---

## 导出格式

### 支持格式
- Markdown (.md)
- 纯文本 (.txt)
- HTML (.html)
- PDF (.pdf)
- EPUB (.epub)
- DOCX (.docx)

### 导出范围
- 全部内容
- 指定卷/章节
- 仅大纲
- 仅角色
- 仅世界观

---

## 进度追踪

### 进度维度
- 章节进度：已完成/进行中/未开始
- 字数进度：当前字数/目标字数
- 里程碑进度：已达成/进行中/未开始
- 时间进度：已用时间/预计时间

### 检查频率
- 章节完成后：检查章节进度
- 每卷完成后：检查卷进度
- 定期：生成进度报告

---

## 配置项说明

### 可配置项
- 章节字数范围
- 默认章节数
- 文风设置
- 输出格式
- 检查频率

### 配置位置
- 项目配置：`config.md`
- 模板配置：`templates.md`
- 运行时配置：通过输入参数

---

## 通用模板

### 输入模板
```
任务：[具体任务描述]
输入数据：
- 数据1
- 数据2
上下文：[相关背景信息]
特殊要求：[如有]
```

### 输出模板
```
任务：[对应输入的任务]
状态：[成功/部分成功/失败]

输出内容：
[具体输出]

改动说明：[如有改动]
[改动详情]

问题清单：[如有问题]
1. [问题1]
2. [问题2]

后续建议：[如有建议]
1. [建议1]
2. [建议2]
```

---

## 更新日志

| 版本 | 日期 | 更新内容 |
|------|------|----------|
| 1.0  | 2026-01-28 | 初始版本，建立通用规范 |
